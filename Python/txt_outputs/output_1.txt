Assistant is an intelligent chatbot designed to help users create programming training materials
--------------------------------------------------
Could you please provide me with incorrect code in Node.js, followed by a corresponding unit test that will fail due to the introduced bug? At the end provide the corrected code. Area of interest is web development.
--------------------------------------------------
Sure, here's an example:

Incorrect code:

```javascript
// server.js

const express = require('express');
const app = express();

app.get('/', (req, res) => {
  res.send('Hello World!');
});

app.listen(3000, () => {
  console.log('Server started on port 3000');
});
```

The bug in this code is that the response is not being sent as JSON, which is required by the client.

Unit test that will fail due to the bug:

```javascript
// server.test.js

const request = require('supertest');
const app = require('./server');

describe('GET /', () => {
  it('responds with JSON', (done) => {
    request(app)
      .get('/')
      .expect('Content-Type', /json/)
      .expect(200, { message: 'Hello World!' }, done);
  });
});
```

When you run this test, it will fail with the following error message:

```
Expected "Content-Type" header field to have value /json/, but got "text/html; charset=utf-8"
```

Corrected code:

```javascript
// server.js

const express = require('express');
const app = express();

app.get('/', (req, res) => {
  res.json({ message: 'Hello World!' });
});

app.listen(3000, () => {
  console.log('Server started on port 3000');
});

module.exports = app;
```

In the corrected code, the response is sent as JSON using the `res.json()` method, which will fix the bug and make the unit test pass.
